<!DOCTYPE htlm> == $0
<html lang="en">>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branch Dashboard | NexusBingo</title>
    <link rel="preload" as="style" href="https://nexus.dirtechnology.com/build/assets/app-CS1XT4PQ.css"><link rel="stylesheet" href="https://nexus.dirtechnology.com/build/assets/app-CS1XT4PQ.css" data-navigate-track="reload">    <style>
        .dropdown-toggle {
            cursor: pointer;
            margin-top: 25px;
            border-radius: 10%;

        }

        .relative {
            position: fixed;
            top: 0;
            right: 0;
            z-index: 1000;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 0.1rem;
            height: 750px;
            width: 750px;
            margin-right: 15px;
        }

        .number-grid button {
            background-color: #333;
            color: white;
            font-size: 1.5rem;
            border: 1px solid #444;
            border-radius: 0.375rem;
            padding: 0.5rem;
            transition: background-color 0.3s;
            margin: 2px;
        }

        .number-grid button.selected {
            background-color: #019DD6;
        }

        .pattern-display {
            /* background-color: #fff; */
            width: 220px;
            border-collapse: collapse;
            margin-right: -600px;
            margin-top: 200px;
        }

        .pattern-grid table {
            border-collapse: collapse;
            width: 350px;
            height: 350px;
        }

        .pattern-grid th,
        .pattern-grid td {
            background-color: #fff;
            border: 3px solid #014576;
            width: 2rem;
            height: 2rem;
            text-align: center;
            padding: 5px;
        }

        .pattern-grid th {
            background-color: #014576;
            color: white;
        }

        .pattern-grid .circle {
            width: 2rem;
            height: 2rem;
            background-color: #019DD6;
            border-radius: 50%;
            margin: auto;
        }

        .pattern-grid .free-spot {
            background-color: #ffd700;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            margin: auto;
        }

        .pattern-grid th:nth-child(2) {
            background-color: #014576;
        }

        .pattern-grid th:nth-child(3) {
            background-color: #014576;
        }

        .pattern-grid th:nth-child(4) {
            background-color: #014576;
        }

        .pattern-grid th:nth-child(5) {
            background-color: #014576;
        }

        .caller_language:hover {
            background-color: #014576;
        }

        @media (max-width: 600px) {
            .number-grid {
                grid-template-columns: repeat(5, 1fr);
                /* Reduce the number of columns on small screens */
                height: 80vw;
                width: 80vw;
            }

            .number-grid button {
                font-size: 2vw;
            }
        }
    </style>
</head>
<body class="bg-gray-800">
    <div class="min-h-screen flex items-center justify-center">
        
        <div class="relative">
            <!-- Dropdown Button -->
            <button class="dropdown-toggle bg-gray-500 w-64 p-4 text-3xl font-bold mb-6">
                History <!-- You can change the button text or add an icon -->
            </button>


            <!-- Dropdown Menu -->
            <nav id="dropdownMenu" class="absolute right-0 mt-2 bg-gray-500 w-64 hidden">
                <ul>
                    <li class="mb-4">
                        <a href="https://nexus.dirtechnology.com/branch/history" class="text-lg hover:text-gray-400" style="align-items: center">Transaction History</a>
                    </li>
                    <li class="mb-4">
                        <form method="POST" action="https://nexus.dirtechnology.com/logout">
                            <input type="hidden" name="_token" value="JffMyofHtFqG4L9AG781QxX1bvg53U1dvbuIgTyG" autocomplete="off">                            <button type="submit" class="text-lg hover:text-gray-400" style="align-items: center">Logout</button>
                        </form>
                    </li>
                </ul>
            </nav>
        </div>
        <!-- Main content -->
        <div class="p-10 w-full max-w-6xl mx-auto flex">
            <!-- Number Grid (Bingo Cards) -->
            <div class="w-2/3">
                <div class="number-grid mb-5">
                                            <button type="button" class="number-button" data-card-id="1">
                            1
                        </button>
                                            <button type="button" class="number-button" data-card-id="2">
                            2
                        </button>
                                            <button type="button" class="number-button" data-card-id="3">
                            3
                        </button>
                                            <button type="button" class="number-button" data-card-id="4">
                            4
                        </button>
                                            <button type="button" class="number-button" data-card-id="5">
                            5
                        </button>
                                            <button type="button" class="number-button" data-card-id="6">
                            6
                        </button>
                                            <button type="button" class="number-button" data-card-id="7">
                            7
                        </button>
                                            <button type="button" class="number-button" data-card-id="8">
                            8
                        </button>
                                            <button type="button" class="number-button" data-card-id="9">
                            9
                        </button>
                                            <button type="button" class="number-button" data-card-id="10">
                            10
                        </button>
                                            <button type="button" class="number-button" data-card-id="11">
                            11
                        </button>
                                            <button type="button" class="number-button" data-card-id="12">
                            12
                        </button>
                                            <button type="button" class="number-button" data-card-id="13">
                            13
                        </button>
                                            <button type="button" class="number-button" data-card-id="14">
                            14
                        </button>
                                            <button type="button" class="number-button" data-card-id="15">
                            15
                        </button>
                                            <button type="button" class="number-button" data-card-id="16">
                            16
                        </button>
                                            <button type="button" class="number-button" data-card-id="17">
                            17
                        </button>
                                            <button type="button" class="number-button" data-card-id="18">
                            18
                        </button>
                                            <button type="button" class="number-button" data-card-id="19">
                            19
                        </button>
                                            <button type="button" class="number-button" data-card-id="20">
                            20
                        </button>
                                            <button type="button" class="number-button" data-card-id="21">
                            21
                        </button>
                                            <button type="button" class="number-button" data-card-id="22">
                            22
                        </button>
                                            <button type="button" class="number-button" data-card-id="23">
                            23
                        </button>
                                            <button type="button" class="number-button" data-card-id="24">
                            24
                        </button>
                                            <button type="button" class="number-button" data-card-id="25">
                            25
                        </button>
                                            <button type="button" class="number-button" data-card-id="26">
                            26
                        </button>
                                            <button type="button" class="number-button" data-card-id="27">
                            27
                        </button>
                                            <button type="button" class="number-button" data-card-id="28">
                            28
                        </button>
                                            <button type="button" class="number-button" data-card-id="29">
                            29
                        </button>
                                            <button type="button" class="number-button" data-card-id="30">
                            30
                        </button>
                                            <button type="button" class="number-button" data-card-id="31">
                            31
                        </button>
                                            <button type="button" class="number-button" data-card-id="32">
                            32
                        </button>
                                            <button type="button" class="number-button" data-card-id="33">
                            33
                        </button>
                                            <button type="button" class="number-button" data-card-id="34">
                            34
                        </button>
                                            <button type="button" class="number-button" data-card-id="35">
                            35
                        </button>
                                            <button type="button" class="number-button" data-card-id="36">
                            36
                        </button>
                                            <button type="button" class="number-button" data-card-id="37">
                            37
                        </button>
                                            <button type="button" class="number-button" data-card-id="38">
                            38
                        </button>
                                            <button type="button" class="number-button" data-card-id="39">
                            39
                        </button>
                                            <button type="button" class="number-button" data-card-id="40">
                            40
                        </button>
                                            <button type="button" class="number-button" data-card-id="41">
                            41
                        </button>
                                            <button type="button" class="number-button" data-card-id="42">
                            42
                        </button>
                                            <button type="button" class="number-button" data-card-id="43">
                            43
                        </button>
                                            <button type="button" class="number-button" data-card-id="44">
                            44
                        </button>
                                            <button type="button" class="number-button" data-card-id="45">
                            45
                        </button>
                                            <button type="button" class="number-button" data-card-id="46">
                            46
                        </button>
                                            <button type="button" class="number-button" data-card-id="47">
                            47
                        </button>
                                            <button type="button" class="number-button" data-card-id="48">
                            48
                        </button>
                                            <button type="button" class="number-button" data-card-id="49">
                            49
                        </button>
                                            <button type="button" class="number-button" data-card-id="50">
                            50
                        </button>
                                            <button type="button" class="number-button" data-card-id="51">
                            51
                        </button>
                                            <button type="button" class="number-button" data-card-id="52">
                            52
                        </button>
                                            <button type="button" class="number-button" data-card-id="53">
                            53
                        </button>
                                            <button type="button" class="number-button" data-card-id="54">
                            54
                        </button>
                                            <button type="button" class="number-button" data-card-id="55">
                            55
                        </button>
                                            <button type="button" class="number-button" data-card-id="56">
                            56
                        </button>
                                            <button type="button" class="number-button" data-card-id="57">
                            57
                        </button>
                                            <button type="button" class="number-button" data-card-id="58">
                            58
                        </button>
                                            <button type="button" class="number-button" data-card-id="59">
                            59
                        </button>
                                            <button type="button" class="number-button" data-card-id="60">
                            60
                        </button>
                                            <button type="button" class="number-button" data-card-id="61">
                            61
                        </button>
                                            <button type="button" class="number-button" data-card-id="62">
                            62
                        </button>
                                            <button type="button" class="number-button" data-card-id="63">
                            63
                        </button>
                                            <button type="button" class="number-button" data-card-id="64">
                            64
                        </button>
                                            <button type="button" class="number-button" data-card-id="65">
                            65
                        </button>
                                            <button type="button" class="number-button" data-card-id="66">
                            66
                        </button>
                                            <button type="button" class="number-button" data-card-id="67">
                            67
                        </button>
                                            <button type="button" class="number-button" data-card-id="68">
                            68
                        </button>
                                            <button type="button" class="number-button" data-card-id="69">
                            69
                        </button>
                                            <button type="button" class="number-button" data-card-id="70">
                            70
                        </button>
                                            <button type="button" class="number-button" data-card-id="71">
                            71
                        </button>
                                            <button type="button" class="number-button" data-card-id="72">
                            72
                        </button>
                                            <button type="button" class="number-button" data-card-id="73">
                            73
                        </button>
                                            <button type="button" class="number-button" data-card-id="74">
                            74
                        </button>
                                            <button type="button" class="number-button" data-card-id="75">
                            75
                        </button>
                                            <button type="button" class="number-button" data-card-id="76">
                            76
                        </button>
                                            <button type="button" class="number-button" data-card-id="77">
                            77
                        </button>
                                            <button type="button" class="number-button" data-card-id="78">
                            78
                        </button>
                                            <button type="button" class="number-button" data-card-id="79">
                            79
                        </button>
                                            <button type="button" class="number-button" data-card-id="80">
                            80
                        </button>
                                            <button type="button" class="number-button" data-card-id="81">
                            81
                        </button>
                                            <button type="button" class="number-button" data-card-id="82">
                            82
                        </button>
                                            <button type="button" class="number-button" data-card-id="83">
                            83
                        </button>
                                            <button type="button" class="number-button" data-card-id="84">
                            84
                        </button>
                                            <button type="button" class="number-button" data-card-id="85">
                            85
                        </button>
                                            <button type="button" class="number-button" data-card-id="86">
                            86
                        </button>
                                            <button type="button" class="number-button" data-card-id="87">
                            87
                        </button>
                                            <button type="button" class="number-button" data-card-id="88">
                            88
                        </button>
                                            <button type="button" class="number-button" data-card-id="89">
                            89
                        </button>
                                            <button type="button" class="number-button" data-card-id="90">
                            90
                        </button>
                                            <button type="button" class="number-button" data-card-id="91">
                            91
                        </button>
                                            <button type="button" class="number-button" data-card-id="92">
                            92
                        </button>
                                            <button type="button" class="number-button" data-card-id="93">
                            93
                        </button>
                                            <button type="button" class="number-button" data-card-id="94">
                            94
                        </button>
                                            <button type="button" class="number-button" data-card-id="95">
                            95
                        </button>
                                            <button type="button" class="number-button" data-card-id="96">
                            96
                        </button>
                                            <button type="button" class="number-button" data-card-id="97">
                            97
                        </button>
                                            <button type="button" class="number-button" data-card-id="98">
                            98
                        </button>
                                            <button type="button" class="number-button" data-card-id="99">
                            99
                        </button>
                                            <button type="button" class="number-button" data-card-id="100">
                            100
                        </button>
                                    </div>
            </div>

            <!-- Input Fields and Pattern Display -->
            <div class="w-1/3 pl-10">
                <form method="POST" action="https://nexus.dirtechnology.com/branch/game-page">
                    <input type="hidden" name="_token" value="JffMyofHtFqG4L9AG781QxX1bvg53U1dvbuIgTyG" autocomplete="off">


                    <div class="grid gap-4 mb-4" style="margin-top: 100px; margin-left: 10px;margin-right: 10px;">
                                                <div>
                            <label class="block mb-2 text-sm font-medium text-white">Bingo Type</label>
                            <input type="text" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5 placeholder-gray-400" placeholder="75 Bingo" style="width: 250px" disabled="">
                        </div>
                        <div>
                            <label for="bet_amount" class="block mb-2 text-sm font-medium text-white">Bet amount</label>
                            <input type="text" id="bet_amount" name="bet_amount" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5 placeholder-gray-400" placeholder="Enter bet amount" style="width: 250px" value="" required="">
                        </div>

                        <div>
                            <label for="winning_pattern" class="block mb-2 text-sm font-medium text-white">Winning
                                pattern</label>
                            <select id="winning_pattern" name="winning_pattern" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5">
                                                                    <option value="1" data-pattern="[[[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1]],[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]],[[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0]],[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],[[0,0,0,1,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,0,1,0]],[[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1]],[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],[[1,0,0,0,1],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[1,0,0,0,1]],[[0,0,0,0,0],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[0,0,0,0,0]]]">
                                        All Common Patterns</option>
                                                                    <option value="2" data-pattern="[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]">
                                        Full House</option>
                                                            </select>
                        </div>
                    </div>

                    <div class="grid gap-4 mb-4" style="margin-left: 10px;margin-right: 10px;">
                        <div>
                            <label for="call_speed" class="block mb-2 text-sm font-medium text-white">Call speed</label>
                            <select id="call_speed" name="call_speed" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5">
                                <option value="very_fast">Very Fast (3s)</option>
                                <option value="fast">Fast (5s)</option>
                                <!-- Add more options as needed -->
                            </select>
                        </div>

                        <div>
                            <label for="caller_language" class="block mb-2 text-sm font-medium text-white">Caller
                                language</label>
                            <select id="caller_language" name="caller_language" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5">
                                <option value="amharic_female_3sec">
                                    Amharic Female 3sec</option>
                                <option value="amharic_female_5sec">
                                    Amharic Female 5sec</option>
                                <option value="english_female_3sec">
                                    English Female 3sec</option>
                                <option value="amharic_male_5sec">
                                    Amharic Male 5sec</option>
                                <option value="english_male_3sec">
                                    English Male 3sec</option>
                                <option value="english_male_5sec">
                                    English Male 5sec</option>
                                <option value="tigregna">
                                    Tigregna</option>
                            </select>

                        </div>
                    </div>

                    <input type="hidden" name="selected_numbers" id="selected_numbers">
                    <input type="hidden" name="number_of_selected_numbers" id="number_of_selected_numbers">
                    <input type="hidden" name="total_amount" id="total_amount" value="0">

                    <button type="submit" id="createGameButton" style="background-color: #019DD6;" class="w-full text-gray-100 font-bold py-2 px-4 rounded mt-4" disabled="">
                        Create Game
                    </button>
                </form>

                <button id="reset-button" class="w-full text-gray-100 font-bold py-2 px-4 rounded mt-4" style="background-color: red;">Reset Board</button>
                <button id="announcementButton" class="w-full text-gray-100 font-bold py-2 px-4 rounded mt-4" style="background-color: red;">Announcement</button>
            </div>
            <div class="pattern-display mt-6" style="text-align: center;">
                <div class="pattern-grid" id="pattern_grid"><table><tr><th>B</th><th>I</th><th>N</th><th>G</th><th>O</th></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td><td><div class="circle"></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div class="circle"></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div class="free-spot"></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div class="circle"></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div class="circle"></div></td><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr></table></div>
            </div>
        </div>

        

    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const numberButtons = document.querySelectorAll('.number-button');
            const betAmountInput = document.getElementById('bet_amount');
            const selectedNumbersInput = document.getElementById('selected_numbers');
            const numberOfSelectedNumbersInput = document.getElementById('number_of_selected_numbers');
            const winningPatternSelect = document.getElementById('winning_pattern');
            const totalAmountInput = document.getElementById('total_amount');
            const patternGrid = document.getElementById('pattern_grid');
            const resetButton = document.getElementById('reset-button');
            const announcementButton = document.getElementById('announcementButton');
            const announcementSound = new Audio('/audios/announcement.mp3');
            const createGameButton = document.getElementById('createGameButton'); // Now targeting by ID

            announcementButton.addEventListener('click', function() {
                announcementSound.play().catch(e => {
                    console.error("Error playing sound:", e);
                    alert('Error playing sound. Please check console for details.');
                });
            });

            let selectedNumbers = [];

            function updateTotalAmount() {
                const betAmount = parseFloat(betAmountInput.value) || 0;
                const numberOfSelected = selectedNumbers.length;
                const totalAmount = betAmount * numberOfSelected;
                totalAmountInput.value = totalAmount; // Update the hidden input
            }

            function updateButtonState() {
                createGameButton.disabled = selectedNumbers.length < 5;
            }
            numberButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const cardId = this.dataset.cardId;
                    if (selectedNumbers.includes(cardId)) {
                        selectedNumbers = selectedNumbers.filter(n => n !== cardId);
                        this.classList.remove('selected');
                    } else {
                        selectedNumbers.push(cardId);
                        this.classList.add('selected');
                    }
                    selectedNumbersInput.value = selectedNumbers.join(',');
                    numberOfSelectedNumbersInput.value = selectedNumbers.length;
                    updateTotalAmount(); // Update total amount whenever selection changes
                    updateButtonState(); // Update the state of the create game button
                });
            });

            betAmountInput.addEventListener('input', function() {
                updateTotalAmount(); // Update total amount on bet amount change
                updateButtonState(); // Also check button state on input change
            });
            winningPatternSelect.addEventListener('change', function() {
                const selectedOption = this.options[this.selectedIndex];
                const patternData = JSON.parse(selectedOption.dataset.pattern);

                clearInterval(window.patternInterval);

                if (selectedOption.text === 'All Common Patterns') {
                    let patternIndex = 0;
                    displayPattern(patternData[patternIndex]);

                    window.patternInterval = setInterval(() => {
                        patternIndex = (patternIndex + 1) % patternData.length;
                        displayPattern(patternData[patternIndex]);
                    }, 3000);
                } else {
                    displayPattern(patternData);
                }
            });

            var toggleBtn = document.querySelector(
                '.dropdown-toggle');
            toggleBtn.addEventListener('click', toggleDropdown);

            function toggleDropdown() {
                var dropdownMenu = document.getElementById('dropdownMenu');
                if (dropdownMenu.classList.contains('hidden')) {
                    dropdownMenu.classList.remove('hidden');
                } else {
                    dropdownMenu.classList.add('hidden');
                }
            }

            // Close dropdown when clicking outside
            window.addEventListener('click', function(event) {
                if (!event.target.matches('.bg-gray-500') && !event.target.matches('.dropdown-toggle')) {
                    var dropdownMenu = document.getElementById('dropdownMenu');
                    if (dropdownMenu && !dropdownMenu.classList.contains('hidden')) {
                        dropdownMenu.classList.add('hidden');
                    }
                }
            });

            function displayPattern(pattern) {
                patternGrid.innerHTML = '';
                const table = document.createElement('table');
                const headerRow = document.createElement('tr');
                const headers = ['B', 'I', 'N', 'G', 'O'];

                headers.forEach(header => {
                    const th = document.createElement('th');
                    th.textContent = header;
                    headerRow.appendChild(th);
                });
                table.appendChild(headerRow);

                pattern.forEach((row, rowIndex) => {
                    const tr = document.createElement('tr');
                    row.forEach((cell, cellIndex) => {
                        const td = document.createElement('td');
                        const div = document.createElement('div');
                        if (cell || (rowIndex === 2 && cellIndex === 2)) {
                            div.className = (rowIndex === 2 && cellIndex === 2) ? 'free-spot' :
                                'circle';
                        }
                        td.appendChild(div);
                        tr.appendChild(td);
                    });
                    table.appendChild(tr);
                });

                patternGrid.appendChild(table);
            }

            resetButton.addEventListener('click', function() {
                selectedNumbers = [];
                numberButtons.forEach(button => {
                    button.classList.remove('selected');
                });
                selectedNumbersInput.value = '';
                numberOfSelectedNumbersInput.value = 0;
                updateTotalAmount(); // Reset total amount
                updateButtonState(); // Reset the state of the create game button
            });

            // Trigger change event to load the default pattern on page load
            winningPatternSelect.dispatchEvent(new Event('change'));
            updateTotalAmount(); // Update total amount on page load
            updateButtonState();

        });
    </script>
    <link rel="modulepreload" href="callern.html"><script type="module" src="https://nexus.dirtechnology.com/build/assets/app-Dd_KH7F6.js" data-navigate-track="reload"></script>


</body>
</html